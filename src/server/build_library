g++ -shared -Wl,-soname,server -o server.so -fPIC server.c -pthread
